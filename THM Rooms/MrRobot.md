# Port Scanning
My preferred method of port scanning is to use a python tool called threader3000. This tool runs a python port scan of the entire port range for a device, then gives you the option to run a verbose Nmap scan on the ports it discovered. This is (in my experience) quicker and more accurate then doing a Nmap scan for port discovery. 

**To use Threader3000 from the attack box, we can run:**
```bash
pip install threader3000
threader3000
```

**Results:**
```bash
------------------------------------------------------------
        Threader 3000 - Multi-threaded Port Scanner          
                       Version 1.0.7                    
                   A project by The Mayor               
------------------------------------------------------------
Enter your target IP address or URL here: 10.10.84.203
------------------------------------------------------------
Scanning target 10.10.84.203
Time started: 2022-05-01 17:05:00.415089
------------------------------------------------------------
Port 80 is open
Port 443 is open
Port scan completed in 0:01:38.923783
------------------------------------------------------------
Threader3000 recommends the following Nmap scan:
************************************************************
nmap -p80,443 -sV -sC -T4 -Pn -oA 10.10.84.203 10.10.84.203
************************************************************
Would you like to run Nmap or quit to terminal?
------------------------------------------------------------
1 = Run suggested Nmap scan
2 = Run another Threader3000 scan
3 = Exit to terminal
------------------------------------------------------------
Option Selection: 1
nmap -p80,443 -sV -sC -T4 -Pn -oA 10.10.84.203 10.10.84.203

Starting Nmap 7.60 ( https://nmap.org ) at 2022-05-01 17:08 BST
Nmap scan report for ip-10-10-84-203.eu-west-1.compute.internal (10.10.84.203)
Host is up (0.00019s latency).

PORT    STATE SERVICE  VERSION
80/tcp  open  http     Apache httpd
|_http-server-header: Apache
|_http-title: Site doesn't have a title (text/html).
443/tcp open  ssl/http Apache httpd
|_http-server-header: Apache
|_http-title: Site doesn't have a title (text/html).
| ssl-cert: Subject: commonName=www.example.com
| Not valid before: 2015-09-16T10:45:03
|_Not valid after:  2025-09-13T10:45:03
MAC Address: 02:1D:C4:B7:6C:61 (Unknown)

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 15.90 seconds
------------------------------------------------------------
Combined scan completed in 0:04:09.382233
Press enter to quit...
```

From these results we can see that the server is running a webserver on ports 80 and 443. The next step would be to enumerate the webpage.

# Visiting the webpage
Visiting the webpage reveals a page that looks like some form of linux console. A mysterious figure says some words to us, and we are prompted to enter some commands. The possible commands are:
```bash
prepare
fsociety
inform
question
wakeup
join
```

The first command I tried was `Join`. This command prompted me for an email. I gave it the address defalex170@topyte.com from [https://temp-mail.org/en/](https://temp-mail.org/en/).  the speaker said we would be in touch.

The next command I tried was `prepare`. This command played a video. I was not able to hear the audio because I was using the attack box. I switched over to the VPN connection and tried again. 

`inform`: Showed a slideshow of scandals with a brief commentary 

`question`: More propaganda

`fsociety`: "Are you ready to join fsociety" in big letters

`wakeup`: another video

# Enumeration
With all commands attempted, we then attempted to further enumerate the website. First, I performed the following Dirb scan:

```bash
gobuster dir -u http://10.10.84.203/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

The first path this discovered was `http://10.10.84.203/0` which linked to a WordPress "content not found" page for a users blog. 

Another page discovered was `image/` which contained a image of a man at a desk

`/admin` contained a page that constantly refreshed. Inspecting the source of the page revealed the words "You are not alone" written in Ascii art as a comment. Viewing the source code reveals a link to the pages main JS. From here, we can view other valid commands not listed on the site

The only found extra command was:
```bash
420: Shows a bob marly quote.
```

Visiting the /robot directory allows us to download two files. The first file appears to be a wordslist, and the second file is the first flag.



