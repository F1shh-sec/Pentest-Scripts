**List of best practices for every AWS services: [AWS SECURITY DOCS](https://docs.aws.amazon.com/security/)**

# Buckets and AWS Console
```bash
# List the content of a bucket using aws console.
aws s3 ls s3://<LOCATION> --no-sign-request

# Download content from a bucket 
curl http://<LOCATION>.s3.amazonaws.com/<ITEM>.xml
aws s3 cp s3://<LOCATION>/<ITEM>.xml . --no-sign-request

# Sign in with Credentials. Creds stored in .aws/config and .aws/credentials
aws configure --profile <PROFILENAME>
aws s3 ls --profile <PROFILENAME>

# Find account ID belonging to access key
aws sts get-access-key-info --access-key-id <KEYVALUE>

# Get Username access key belongs to
aws sts get-caller-identity --profile <PROFILENAME>

# Get EC2 instances for an account
aws ec2 describe-instances --output text --profile <PROFILENAME>
aws ec2 describe-instances --output text --region us-east-1 --profile <PROFILENAME>
```

# IAM (Identity and Access Management)
### General Access Control Rules:
- If there is a deny anywhere it is denied.
- If there is no deny and there is an allow anywhere, its allowed.
- If nobody says anything about it, it is denied. 

```json
// This rule states that you are allowed to do anything in a bucket
{
  "Version": "2012-10-17",
  "Statement": {
	// Either allow or deny
    "Effect": "Allow",
    "Action": [
	    // Specifies what you can or cant do
	    "s3:*"
    ],
    // What you can or cant do to the resource. * is a wildcard
    "Resource": "arn:aws:s3:us-east-2:111122223333:bucketname/*"
  }
}

// more specific rule to only allow access to specific commands
{
  "Version": "2012-10-17",
  "Statement": {
    "Effect": "Allow",
    "Action": [
	    "dynamodb:BatchGetItem",
	    "dynamodb:GetItem",
	    "dynamodb:Query"
    ],
    "Resource": [
	    "arn:aws:dynamodb:us-east-2:111122223333:Tablename",
	    "arn:aws:dynamodb:us-east-2:111122223333:Tablename/index/*"
    ]
  }
}
```

For kms encrypted assets, You need to specifically allow decryption permissions for assets using a specific key. Decryption permissions are not automatically granted if retrieve permissions are granted. 

# AWS VPC (Virtual Private Cloud)
**Security Groups:** They are just statefull firewalls.
- You can allow one security group to allow in another security group.
- You can specify what traffic you expect on what group from what port

**Rout tables:** Allows you to specify traffic paths. Anything not specified will be black-holed. Also allows you to specify default gateways.

